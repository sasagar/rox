# デプロイドキュメント

**言語**: [English](./README.md) | 日本語

様々な環境へのRoxデプロイガイド。

## デプロイオプション

| 環境 | ガイド | 難易度 | 適したユースケース |
|------|--------|--------|-------------------|
| VPS (Docker) | [vps-docker.md](./vps-docker.md) | 簡単 | クイックセットアップ、分離されたサービス |
| VPS (ベアメタル) | [bare-metal.md](./bare-metal.md) | 中 | 最大パフォーマンス、低RAM |
| Cloudflare Workers | 準備中 | - | エッジデプロイメント |
| Kubernetes | 準備中 | - | 大規模デプロイメント |

## デプロイ方法の選択

### Dockerデプロイメント（ほとんどのユーザーに推奨）

**メリット:**
- シンプルなセットアッププロセス
- 分離されたサービスと簡単なクリーンアップ
- 異なるLinuxディストリビューション間で一貫性がある
- 組み込みのサービスオーケストレーション

**適したユーザー:**
- 初めてデプロイする方
- Dockerに慣れているチーム
- 2GB以上のRAMを持つサーバー
- 素早いプロトタイピングとテスト

### ベアメタルデプロイメント

**メリット:**
- コンテナのオーバーヘッドなし（約100-200MB RAMを節約）
- デバッグのための直接システムアクセス
- ネイティブパフォーマンス
- 各コンポーネントへのより細かい制御

**適したユーザー:**
- リソース制約のあるサーバー（2GB未満のRAM）
- 経験豊富なLinux管理者
- 最大パフォーマンスが必要な場合
- カスタム設定が必要な場合

## クイックリンク

- **[インストールガイド](./installation-guide.md)** - 完全なステップバイステップデプロイガイド（推奨）
- [VPS Dockerデプロイメント](./vps-docker.md) - Docker Composeでデプロイ
- [ベアメタルデプロイメント](./bare-metal.md) - Linuxに直接デプロイ
- [Nginx設定](./nginx-configuration.md) - SSE対応のNginxリバースプロキシ設定
- [環境変数](./environment-variables.md) - 完全な設定リファレンス
- [トラブルシューティング](./troubleshooting.md) - よくある問題と解決策

## 最小要件

### ハードウェア要件

| リソース | 最小 | 推奨 |
|---------|------|------|
| CPU | 2 vCPU | 4 vCPU |
| RAM | 1 GB (ベアメタル) / 2 GB (Docker) | 4 GB |
| ストレージ | 20 GB SSD | 40 GB SSD |
| OS | Ubuntu 22.04+ / Debian 12+ | Ubuntu 24.04 |

### ソフトウェア要件

**Dockerデプロイメント:**
- Docker Engine 24.0+
- Docker Compose v2
- DNSアクセス可能なドメイン

**ベアメタルデプロイメント:**
- Bunランタイム
- PostgreSQL 14+
- DragonflyまたはRedis（オプション）
- CaddyまたはNginx
- DNSアクセス可能なドメイン

## アーキテクチャ概要

```
┌─────────────────────────────────────────────────────────────┐
│                        インターネット                         │
└───────────────────────────┬─────────────────────────────────┘
                            │
                    ┌───────┴───────┐
                    │    Caddy      │  自動HTTPS
                    │  (リバース    │  HTTP/2, HTTP/3
                    │   プロキシ)   │
                    └───────┬───────┘
                            │
                    ┌───────┴───────┐
                    │     Rox       │  Hono + Bun
                    │   バックエンド │  ActivityPub
                    └───────┬───────┘
                            │
         ┌──────────────────┼──────────────────┐
         │                  │                  │
┌────────┴────────┐ ┌──────┴──────┐ ┌────────┴────────┐
│   PostgreSQL    │ │  Dragonfly  │ │    ストレージ    │
│   (データベース) │ │  (キャッシュ/│ │   (ローカル/S3) │
│                 │ │   キュー)   │ │                 │
└─────────────────┘ └─────────────┘ └─────────────────┘
```

## セキュリティチェックリスト

本番環境に移行する前に:

- [ ] データベースに強力でユニークなパスワードを使用
- [ ] 管理者アカウント作成後に登録を無効化
- [ ] ファイアウォールがポート80と443のみを公開していることを確認
- [ ] 自動バックアップを設定
- [ ] 監視とアラートを設定
- [ ] レート制限設定を確認
- [ ] 他のインスタンスとの連合をテスト

## サポート

- [GitHub Issues](https://github.com/Love-rox/rox/issues) - バグ報告と機能リクエスト
- [Discussions](https://github.com/Love-rox/rox/discussions) - 質問とコミュニティサポート
